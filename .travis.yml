language: csharp
sudo: required
mono: none
dist: trusty
dotnet: 2.1.300

branches:
  except:
    - 1.0
    - 2.0
    - 2.1
    - dse_3.1
    
matrix:
  include:
    - env: TARGETF=netcore21
    - env: TARGETF=netcore20

script:
  - dotnet restore src
  - if [ "$TARGETF" = "netcore20" ]; then dotnet test src/Cassandra.Tests/Cassandra.Tests.csproj -c Release -f netcoreapp2.0; fi
  - if [ "$TARGETF" = "netcore21" ]; then dotnet test src/Cassandra.Tests/Cassandra.Tests.csproj -c Release -f netcoreapp2.1; fi